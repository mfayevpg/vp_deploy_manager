<template name="taskListDisplay">
    {{#if canUpdate}}
        <a href="#" class="btn btn-success btn-mini" id="updateTaskList"><i class="icon-pencil icon-white"></i>
            Update</a>
    {{/if}}
    <table class="table table-bordered">
        <thead>
        <tr>
            {{#if canUpdate}}
                <th>Move</th>
            {{/if}}
            <th>Product</th>
            <th>BU</th>
            <th>Description</th>
            <th>Command</th>
            <th>Server</th>
            <th>Execution time</th>
            {{#if canUpdate}}
                <th>Action</th>
            {{/if}}
        </tr>
        </thead>
        <tbody>
            {{#each taskList}}
            <tr>
                {{> taskDetailDisplay}}
            </tr>
            {{/each}}
            {{#if isUpdate}}
            <tr>
                {{> taskForm}}
            </tr>
            {{/if}}
        </tbody>
    </table>
</template>

<template name="taskDetailDisplay">
    {{#if canUpdate}}
        <td>
            {{#if canGoDown}}
                <a href="#" class="goDown"><i class="icon-arrow-down"></i></a>
            {{/if}}
            {{#if canGoUp}}
                <a href="#" class="goUp"><i class="icon-arrow-up"></i></a>
            {{/if}}
        </td>
    {{/if}}
    {{#if isSeparator}}
        {{> separatorDisplay}}
    {{else}}
        {{> normalTaskDisplay}}
    {{/if}}
    {{#if canUpdate}}
        <td>
            {{#if isUpdate}}
                <a href="#" class="btn btn-mini"><i class="icon-pencil"></i></a>
                <a href="#" class="btn btn-mini"><i class="icon-remove"></i></a>
            {{else}}
                &nbsp;
            {{/if}}
        </td>
    {{/if}}
</template>

<template name="normalTaskDisplay">
    <!--<th>Product</th>-->
    <!--<th>BU</th>-->
    <!--<th>Description</th>-->
    <!--<th>Command</th>-->
    <!--<th>Server</th>-->
    <!--<th>Execution time</th>-->
    <td>
        {{productName}}
    </td>
    <td>
        {{#if buList}}
            <ul>
            {{#each buList}}
                <li>{{this}}</li>
            {{/each}}
            </ul>
        {{/if}}
    </td>
    <td>
        {{description}}
    </td>
    <td>
        <pre>{{command}}</pre>
    </td>
    <td>{{server}}</td>
    <td>{{> userTimeDisplay}}<br/>{{> userTimeDisplay}}</td>
</template>

<template name="userTimeDisplay">
    12:41 - <a href="{{currentUser.profile.html_url}}" title="{{currentUser.profile.name}}"
               target="_blank">
    <img style="height: 32px; width: 32px;" src="{{currentUser.profile.avatar_url}}"></a>
</template>

<template name="separatorDisplay">
    <td colspan="6">
        <div class="text-center">{{description}}</div>
    </td>
</template>

<template name="taskForm">
    <td colspan="8">
        <form class="form-horizontal">
            <legend>Task Form</legend>
            <div class="control-group">
                <label class="control-label">&nbsp;</label>

                <div class="controls">
                    <label class="checkbox"><input type="checkbox" id="separator"> Separator</label>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Product Name</label>

                <div class="controls">
                    <select class="input-small" id="productName">
                        <option value="">Select</option>
                        <option>Bong</option>
                        <option>Ozone</option>
                        <option>Oxy</option>
                        <option>MobMid</option>
                        <option>MemberMid</option>
                    </select>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">BU</label>

                <div class="controls">
                    <label class="checkbox inline"><input id="bu_BR" value="br" type="checkbox">BR</label>
                    <label class="checkbox inline"><input id="bu_ES" value="es" type="checkbox">ES</label>
                    <label class="checkbox inline"><input id="bu_FR" value="fr" type="checkbox">FR</label>
                    <label class="checkbox inline"><input id="bu_IT" value="it" type="checkbox">IT</label>
                    <label class="checkbox inline"><input id="bu_PL" value="pl" type="checkbox">PL</label>
                    <label class="checkbox inline"><input id="bu_UK" value="uk" type="checkbox">UK</label>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Description</label>

                <div class="controls">
                    <textarea class="input-xlarge" id="description"></textarea>
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">Command</label>

                <div class="controls">
                    <input type="text" class="input-xxlarge" id="command">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">Server</label>

                <div class="controls">
                    <select class="input-small" id="server">
                        <option value="">Select</option>
                        <option>vp-calculator01</option>
                        <option>vp-calculator02</option>
                        <option>vp-calculator03</option>
                        <option>vp-calculator04</option>
                        <option>vp-calculator05</option>
                        <option>vp-calculator06</option>
                    </select>
                    <a href="#" class="btn" id="addTask">
                        Ajouter
                    </a>
                </div>
            </div>
        </form>
    </td>
</template>